<p id="notice"><%= notice %></p>

<h1>Club Details</h1>
<p>
  <strong>Name:</strong>
  <%= @club.name %>
</p>
<p>
  <strong>Description:</strong>
  <%= @club.description %>
</p>
<p>
  <strong>Founded:</strong>
  <%= @club.created_at %>
</p>


<h1>Members Area</h1>

<h2>Commitee Details</h2>

  <h3>Owner: </h3>
<p>
  <%owner = User.find_by(id: @club.owner_id)%>
  <%= owner.full_name %> |
  <%= owner.email%> |
  <%= owner.phone_number%>
</p>
<h3>Administrators</h3>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Contact Number</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @club.administrators.each do |admin| %>
     <%adminUser = User.find_by(id: admin.adminId)%>
      <tr>
        <td><%= adminUser.full_name %></td>
        <td><%= adminUser.email %></td>
        <td><%= adminUser.phone_number %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>


<!-- check if the current user is Administrator for the club /-->
<%isAdmin = false%>
<%if ((@club.administrators.include? Administrator.find_by(adminId: current_user.id)) || (@club.owner_id == current_user.id))%>
	<%isAdmin = true%>
<%end%>


<%if @club.approved%>
<h2>Events</h2>
<h2>Announcements</h2>

<%if isAdmin%>
	<h2>Shared Events Pending Acceptance</h2>
<%end%>
<!--  links to actions /-->
	<%if @club.users.include? current_user%>
		<%= link_to "Leave Club", leave_club_path(@club.id) %> |
	<%else%>
		<%= link_to "Join Club", join_club_path(@club.id) %> |
	<%end%>
	
	<%= link_to "Follow", follow_club_path(@club.id) %> |
	
	
	<%if isAdmin%>
		<%= link_to 'New Event', new_event_path(:club_id => @club.clubId) %> |
		<%= link_to 'Add Announcement', new_club_announcement_path(:club_id => @club.clubId) %> |
	<%end%>
<%else%>
<h1>Club is pending approval</h1>
	<%if current_user.csadmin%>
		<%= link_to "Approve Club", approve_club_path(@club.id), data: { confirm: 'Are you sure?' }  %> |
	<%end%>
<%end%>

<%if isAdmin%>
	<%= link_to "Edit Club Profile", edit_club_path(@club) %> |
<%end%>
<%if @club.owner_id == current_user.id%>
	<%= link_to "Deregister Club", @club, method: :delete, data: { confirm: 'Are you sure?' } %> |
<%end%>

<%= link_to 'Back', clubs_path %>
