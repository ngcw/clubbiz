<p id="notice"><%= notice %></p>

<h1>Club Details</h1>
<p>
  <strong>Name:</strong>
  <%= @club.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @club.description %>
</p>


<p>
  <strong>Founded:</strong>
  <%= @club.created_at %>
</p>
<h1>Members Area</h1>

<h2>Commitee Details</h2>
<p>
  <strong>Owner: </strong><br>
  <%owner = User.find_by(id: @club.owner_id)%>
  <%= owner.full_name %><br>
  <%= owner.email%><br>
  <%= owner.phone_number%><br>
</p>
<br>
<p><strong>Administrators</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Contact Number</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @club.administrators.each do |admin| %>
     <%adminUser = User.find_by(id: admin.adminId)%>
      <tr>
        <td><%= adminUser.full_name %></td>
        <td><%= adminUser.email %></td>
        <td><%= adminUser.phone_number %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>

<!--  links to actions /-->
<%if @club.users.include? current_user%>
	<%= link_to "Leave Club", leave_club_path(@club.id) %> |
<%else%>
	<%= link_to "Join Club", join_club_path(@club.id) %> |
<%end%>

<%= link_to "Follow", follow_club_path(@club.id) %> |
<%= link_to 'New Event', new_event_path(:club_id => @club.clubId) %> |

<!-- check if the current user is Administrator for the club /-->
<%isAdmin = false%>
<%if @club.administrators.include? Administrator.find_by(adminId: current_user.id)%>
	<%isAdmin = true%>
<%end%>
<%if @club.owner_id == current_user.id%>
	<%isAdmin = true%>
	<%= link_to "Deregister Club", @club, method: :delete, data: { confirm: 'Are you sure?' } %> |
<%end%>

<%if isAdmin%>
	<%= link_to "Edit Club Profile", edit_club_path(@club) %> |
	
<%end%>
<%if current_user.csadmin%>
	<%= link_to "Approve Club", approve_club_path(@club.id), data: { confirm: 'Are you sure?' }  %> |
<%end%>
<%= link_to 'Back', clubs_path %>
